{
  "name": "node",
  "scripts": {
    "clean": "rm -rf build/",
    "finished": "echo -e '\n――― Backend build finished! ―――\n'",
    "make_runtime_dirs": "mkdir -p build/runtime/{config,data}",
    "copy_client": "cp -r client/build build/client",

    "build:dev": "webpack --config webpack.dev.js && npm run --silent make_runtime_dirs && npm run --silent finished",
    "build:prod": "webpack --config webpack.prod.js && npm run --silent make_runtime_dirs && npm run --silent finished",
    "build:release": "webpack --config webpack.prod.js --env.release && npm run --silent copy_client && npm run --silent finished",

    "build": "func() { [ -z \"$1\" ] && mode='dev' || mode=\"$1\"; npm run --silent clean && npm run --silent build:front \"$mode\" && npm run --silent build:back \"$mode\"; }; func",
    "build:front": "func() { [ -z \"$1\" ] && mode='dev' || mode=\"$1\"; npm run --silent --prefix 'client/' build \"$mode\"; }; func",
    "build:back": "func() { [ -z \"$1\" ] && mode='dev' || mode=\"$1\"; npm run --silent clean && npm run --silent build:\"$mode\"; }; func",

    "start": "echo 'Starting backend server:' && node build/go-music",
    "start:front": "echo 'Starting frontend development server:' && npm run --prefix client/ start",
    "start:back": "echo 'Starting backend server (API only):' && node build/go-music --api-only"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^2.19.2",
    "@typescript-eslint/parser": "^2.19.2",
    "copy-webpack-plugin": "^5.1.1",
    "eslint": "^6.8.0",
    "eslint-loader": "^3.0.3",
    "raw-loader": "^4.0.0",
    "ts-loader": "^6.2.1",
    "typescript": "^3.7.5",
    "webpack": "^4.41.6",
    "webpack-cli": "^3.3.11",
    "webpack-merge": "^4.2.2",
    "webpack-node-externals": "^1.7.2",
    "webpack-shell-plugin": "^0.5.0"
  },
  "dependencies": {
    "@iarna/toml": "^2.2.3",
    "@types/better-sqlite3": "^5.4.0",
    "@types/express": "^4.17.2",
    "@types/he": "^1.1.0",
    "@types/iarna__toml": "^2.0.0",
    "@types/minimist": "^1.2.0",
    "@types/node": "^13.7.1",
    "apollo-server-express": "^2.11.0",
    "better-sqlite3": "^6.0.1",
    "express": "^4.17.1",
    "fast-xml-parser": "^3.16.0",
    "he": "^1.2.0",
    "minimist": "^1.2.5",
    "xdg-basedir": "^4.0.0"
  }
}
